<div class="min-h-screen flex flex-col items-center justify-center bg-background-light p-6">
    <div class="bg-surface-light rounded-xl shadow-lg p-8 w-full max-w-sm flex flex-col items-center animate-fade-in">

        @if(!state.success){
        <h2 class="text-2xl font-semibold mb-6 text-primary-light">Reset Password</h2>
        <form class="w-full" #form="ngForm" (ngSubmit)="submit(form)">
            <mat-form-field appearance="outline" class="w-full mb-4">
                <mat-label>New password</mat-label>
                <input matInput [type]="showPassword ? 'text' : 'password'" name="newPassword"
                    [(ngModel)]="state.newPassword" required />
                <button mat-icon-button matSuffix type="button" (click)="showPassword = !showPassword"
                    class="text-primary-light">
                    <mat-icon>{{ showPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-full mb-4">
                <mat-label>Confirm password</mat-label>
                <input matInput [type]="showConfirmPassword ? 'text' : 'password'" name="confirmPassword"
                    [(ngModel)]="state.confirmPassword" required />
                <button mat-icon-button matSuffix type="button" (click)="showConfirmPassword = !showConfirmPassword"
                    class="text-primary-light">
                    <mat-icon>{{ showConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>
            </mat-form-field>

            <app-custom-button icon="lock_reset" variant="primary" buttonType="submit" [disabled]="form.invalid ?? false"
                [customClass]="'w-full'">
                Reset Password
            </app-custom-button>

            @if(state.message && !state.success) {
            <p class="mt-4 text-center text-sm text-error-light">
                {{ state.message }}
            </p>
            }
        </form>
        } @else {
        <div class="flex flex-col items-center justify-center gap-7">
            <mat-icon class="!text-primary-light text-4xl mb-2">check_circle</mat-icon>
            <h2 class="text-xl font-bold mb-2 text-primary-light">{{ state.message }}</h2>
            <p class="text-base text-on-surface-light text-center">You can close this page and move to the application
            </p>
        </div>
        }
    </div>
</div>